实验f4a 8位12指令硬布线CPU设计
模型机是计算机的缩细模型，通过它可以理解计算机整机的结构及功能，理解CPU、存储器、中断控制器、接口的结构及实现逻辑和各部件之间的接口关系。本次课程设计的主要内容是利用Intel公司的EPF10K10LC84-4的内部可编程资源，设计一个8位模型计算机。本课程设计的主要目的是通过部件级的8位模型机的设计和调试，使学生掌握计算机工作中“时间—空间”概念的理解，从而清晰地建立计算机的整机概念，并培养学生分析和解决实际问题的能力，同时增强学生的动手能力。


一、实验目的

（1）融会贯通本课程各章节的内容，通过知识的综合运用，加深对计算机系统各功能部件的工作原理及相互联系的认识，加深计算机工作中“时间—空间”概念的理解，从而清晰地建立计算机的整机概念；

（2）学习设计和调试计算机的基本步骤和方法，提高使用Quartus等软件仿真工具和集成电路的基本技能；

（3）培养科学研究的独立工作能力，取得工程设计与组装调试的实践和经验。
二、设计要求

设计一台硬布线控制器的8位模型计算机，用VHDL语言完成设计并调试成功

三、实验原理

以控制器为中心，首控制器从指令寄存器取得指令，编译指令，再输出微控制信号，控制ALU的运算，PC加一，并且从RAM中取出数据运算，运算后再把结果通过数据总线存到RAM，在指令寄存器读去下一条指令，依次循环。

四、设计内容



五、CPU电路图展示



六、由六大模块组成模型机仿真图

将这六大模块连成一大整体它产生控制信号也即控制器产生的控制信号控制各大模块的运行，而且它能检测其它部件发送过来的信号，协调各个部件按指令要求完成规定任务，所以它的输出是各大控制信号也即前面涉及到的控制器的控制信号。

七、ram中测试程序，波形图及与指令的对应关系分析，数据运算过程分析

（1）测试程序

（2）波形图及逐条指令、逐个阶段、逐个操作、逐个部件逐个数据变化的对应关系分析，数据运算过程分析。


读取指令

第一步:PC将指令地址通过地址总线给MAR

abus中,若传输的为pc中的值,则为递增从0000到1001(9)的数

此时地址总线数值为0000,0000

第二步:向主存发送读命令

每当PC的值放到数据总线时,PC_enAX为1,即标志PC访问MAR

在该系统中,PC将指令地址直接传给RAM

第三步:将MAR所指的内存单元经过数据总线给MDR

以第一条例子中第一个指令,此时数据总线为0001,0100,即RAM中0号存储单元对应的数据;

第四步:将MDR中的内容给IR,

此时ir_ldx为1,标志被写入数据

第五步:将指令的操作码部分给CU

CU用IR的后4位(4到7位)作为操作码,进行译码;

指令为0001,0100

操作码为0001,存数指令

第六步:形成下一条指令

PC+1

此时,地址总线为0000,0001

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
执行周期(以存数指令为例)

存数指令

第一步:将指令的地址码(前四位)通过地址总线部分给MAR

指令为0001,0100

地址码为0100

此时地址总线的值为0000,0100

此时pc_enAx为1,标志cu向RAM写入数据

第二步:向主存发读指令

此时mem_rwX为1

第三步:将MDR中的数据写到MAR指定的主存单元内;

此时MDR放的不是指令,而是数据

此时数据总线为0000,0000

此时mem_rw为0,标志写操作

即将数据0000,0000写到4号存储单元;

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
七、其他测试程序，波形图及与指令的对应关系分析，数据运算过程分析



（2）波形图及及逐条指令、逐个阶段、逐个操作、逐个部件逐个数据变化的对应关系分析，数据运算过程分析。


LOAD 2
PC为0000,0000
PC将指令地址直接传给MAR,MAR通过数据总线传给RAM;
此时地址总线为0000,0000
拿到0号存储单元的指令后经过数据总线给MDR
此时数据总线为0000,0010即指令为0000,0010
操作码为0000,LOAD
地址码为0010,2号存储位
操作码部分给CU;
地址码部分给MAR,MAR通过地址总线给RAM,并将数据通过数据总线给MDR与ACC
此时地址总线为0000,0010
此时数据总线为0001,0010
此时ACC_QX为0001,0010

ADD 3
PC为0000,0001
PC将指令地址直接传给MAR,MAR通过数据总线传给RAM;
此时地址总线为0000,0001
拿到1号存储单元的指令后经过数据总线给MDR
此时数据总线为0010,0011即指令为0010,0011
操作码为0010,ADD
地址码为0011,3号存储体
操作码部分给CU;控制ALU进行加法操作
此时ALU_OP为000
对ACC的内容取反,ACC_QX为1110,1110
地址码部分给MAR,MAR通过地址总线给RAM,并将数据通过数据总线给MDR与ACC
此时地址总线为0000,0011
此时数据总线为0000,0001
此时cu操作ALU_OP为111,ALU完成两树相加
数据总线数值分别为:0001,0010;1110,1110;0000,0001;0010,0011;
得到和0010,0011输出到ACC
此时ACC_QX为0010,0011

STORE 2
PC为0000,0010
PC将指令地址直接传给MAR,MAR通过数据总线传给RAM;
此时地址总线为0000,0010
拿到2号存储单元的指令后经过数据总线给MDR
此时数据总线为0001,0010即指令为0001,0010
操作码为0001,STORE
地址码为0010,2号存储位
操作码部分给CU;
地址码部分给MAR,MAR通过地址总线给RAM,并将数据通过数据总线给MDR与ACC
此时地址总线为0000,0010
此时数据总线为1110,1110
此时mem_rw为0,写入操作

HALT
PC为0000,0011
PC将指令地址直接传给MAR,MAR通过数据总线传给RAM;
此时地址总线为0000,0011
拿到4号存储单元的指令后经过数据总线给MDR
此时数据总线为0000,0001即指令为0000,0001
操作码为HALT,程序结束

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
八、实验代码
————————————————
版权声明：本文为CSDN博主「落别雨」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/m0_53295613/article/details/122074392